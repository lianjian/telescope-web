(()=>{var t,e,a=!1,o=$("#trimapCanvas"),n=o[0].getContext("2d"),i=$("#clear-button"),l=$("#toggle-button"),c=$("#telescope-button");document.getElementById("sourceImage");const s=(a,o,i)=>{i&&(n.beginPath(),n.strokeStyle=$("#colorSelect input:radio:checked").val(),n.lineWidth=$("#lineWidth").val(),n.lineJoin="round",n.moveTo(t,e),n.lineTo(a,o),n.closePath(),n.stroke()),t=a,e=o},m=function(t){$("#alphamatteImage").attr("src","data:image/png;base64,"+t.result),$("#alphamatteImage").show(),l.show(),i.hide(),c.hide(),o.hide()};o.on({mousedown:function(t){a=!0;let e=t.pageX-$(this).offset().left,o=t.pageY-$(this).offset().top;s(e,o,!1)},mouseup:function(){a=!1},mousemove:function(t){if(a){let e=t.pageX-$(this).offset().left,a=t.pageY-$(this).offset().top;s(e,a,!0)}},mouseleave:function(){a=!1}}),i.click(function(){n.setTransform(1,0,0,1,0,0),n.clearRect(0,0,n.canvas.width,n.canvas.height)}),c.click(function(){var t=o[0].toDataURL(),e=document.getElementById("imageCanvas"),a=e.getContext("2d"),n=document.getElementById("sourceImage");a.drawImage(n,0,0);var i=e.toDataURL();$.ajax({type:"POST",url:"/demo/",data:JSON.stringify({imgUrl:i,trimapUrl:t},null,"\t"),contentType:"application/json;charset=UTF-8"}).done(m)}),l.click(function(){$("#alphamatteImage").toggle()})})();